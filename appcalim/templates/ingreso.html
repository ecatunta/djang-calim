{% extends 'inicio.html' %}

{% load static %}

{% block title %}
Compras
{% endblock %}

{% block content %}

<section id="pricing" class="pricing section light-background">
    <div class="container container-ingreso">
        <form method="post" action="{% url 'nuevo_ingreso' %}" class="venta-form">
            {% csrf_token %}

            <!-- Contenedor de la barra de búsqueda -->
            <div class="row mb-3 justify-content-center" style="border: 0px solid black;">

                <div class="col-md-2"></div>

                <div class="col-12 col-md-8 mt-1 mt-md-0 position-relative" id="search-bar-container-padre">
                    <div class="search-bar-container input-group shadow-sm" id="search-bar-container">
                        <!-- Ícono de búsqueda, visible por defecto -->
                        <span class="input-group-text border-0 bg-white" id="search-icon">
                            <i class="bi bi-search"></i>
                        </span>
                        <!-- Ícono de la flecha hacia la izquierda, oculto por defecto -->
                        <span class="input-group-text border-0 bg-white" id="back-arrow" style="display: none;">
                            <i class="bi bi-arrow-left"></i>
                        </span>
                        <input type="text" id="producto" name="producto_" class="form-control border-0"
                            placeholder="Buscar..." aria-label="Buscar producto" autocomplete="off">
                        <!--<input type="text" id="id_producto_id" name="producto_id"> -->
                        <input type="hidden" id="id_producto_id" name="producto">
                    </div>
                    <!-- Panel de sugerencias -->
                    <ul id="suggestions" class="list-group mt-1" style="display: none;"></ul>
                </div>

                <div class="col-12 col-md-2 d-flex align-items-center mt-2 mt-md-0">
                    <!--
                    <button type="submit" id="btn_adicionar" class="btn btn-primary w-100 btn-custom-adicionar"
                        disabled>
                        <i class="bi bi-plus-circle"></i> Adicionar
                    </button>
                    -->
                </div>
            </div>

            <!--
            <div id="capa-adicionar" class="row row-campos mb-3" style="display: none;">                
                <div class="col-md-3 col-4 d-flex flex-column justify-content-center text-center">
                    <label for="id_ingreso_unidad" class="label-unidad"></label>
                    <input type="number" id="id_ingreso_unidad" name="ingreso_unidad"
                        class="form-control v-placeholder text-center" placeholder="Unidades" autocomplete="off">
                </div>                
                <div class="col-md-3 col-4 d-flex flex-column justify-content-center text-center">
                    <label for="id_ingreso_costoU" class="label-costoU"></label>
                    <input type="text" id="id_ingreso_costoU" name="ingreso_costoUnitario"
                        class="form-control v-placeholder text-center" placeholder="Costo Unidad" step="any"
                        autocomplete="off">
                </div>
                <div class="col-md-3 col-4 d-flex flex-column justify-content-center text-center">
                    <label for="id_ingreso_costoT" class="label-costoT"></label>
                    <input type="text" id="id_ingreso_costoT" name="ingreso_costoTotal"
                        class="form-control v-placeholder text-center resultado-calculo" placeholder="Costo Total"
                        readonly>
                </div>                
                <div class="col-md-3 col-12 d-flex align-items-center justify-content-center mt-2">
                    <button type="submit" id="btn_adicionar" class="btn btn-primary w-100 btn-custom-adicionar"
                        disabled>
                        <i class="bi bi-plus-circle"></i> Adicionar Producto
                    </button>
                </div>                
                <div class="col-md-4 col-12 d-flex flex-column justify-content-center text-center"
                    style="display: none !important;">
                    <label for="id_ingreso_referencia" class="form-label">Detalle</label>
                    <input type="text" id="id_ingreso_referencia" name="ingreso_referencia"
                        class="form-control v-placeholder" placeholder="Descripción">
                </div>
            </div>
            -->

        </form>

        <!-- Título de la tabla -->
        <!-- 
        <div class="row align-items-center mb-3">
            <div class="col-12 text-center">
                <h2 class="table-title">
                    Compras Pendientes en Inventario
                    <span class="table-total">Total: 122</span>
                </h2>
            </div>
        </div>
    -->
        <!-- Título de la tabla -->
        <div class="row align-items-center mb-3">
            <div class="col-12 text-center">
                <h2 class="table-title">
                    Compras Pendientes en Inventario
                    <!--<span id="total-ingresos" class="table-total">({{ total_ingreso }} Registros)</span>-->
                    <span class="table-total">(<span id="total-ingresos">{{ total_ingreso }} </span> Registros)</span>
                </h2>
            </div>
        </div>

        <!--tabla ingresos pendientes-->
        <div class="row">
            <div class="col-12">
                <div class="table-responsive" style="position: relative;">
                    <table id="ingreso_tabla" class="table table-bordered table-hover table-striped">
                        <thead class="thead-dark text-center">
                            <tr>
                                <th data-text-xs="Fecha">Fecha Ingreso</th>
                                <th data-text-xs="Producto" class="th-producto">Producto</th>
                                <th data-text-xs="Acción" class="text-center">Acción</th>
                            </tr>
                        </thead>

                        <tbody id="table-ingreso-body">
                            {% for ingreso in ingresos %}
                            <tr data-ingreso-id="{{ ingreso.ingreso_id }}"
                                categoriaFechaVto="{{ingreso.ingreso_categoriaFechaVto}}">
                                <td style="vertical-align: middle;">{{ ingreso.ingreso_fecha_formateada }}</td>
                                <td style="vertical-align: middle; text-align:left;">{{ ingreso.producto }}</td>

                                <td class="text-center" style="vertical-align: middle;">
                                    <div class="d-inline-flex gap-2">
                                        <button class="btn btn-warning inventario_ingreso">
                                            <i class="bi bi-bag d-inline d-md-none"></i>
                                            <i class="bi bi-bag d-none d-md-inline"></i>
                                            <span class="d-none d-md-inline">Inventario</span>
                                        </button>
                                        <button class="btn btn-danger ingreso_quitar">
                                            <i class="bi bi-trash d-inline d-md-none"></i>
                                            <i class="bi bi-trash d-none d-md-inline"></i>
                                            <span class="d-none d-md-inline">Quitar</span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <!--<div id="loading-overlay-tbody-compras" class="custom-loading-overlay d-none">
                        <div class="spinner-border custom-spinner mb-3" role="status">
                            <span class="visually-hidden">Cargando...</span>
                        </div>
                        <span>Cargando...</span>
                    </div>
                    -->
                </div>
            </div>
        </div>
        <!--fin tabla ingresos pendientes-->
    </div>
</section>

<!-- Spinner loading -->
<div id="loading-spinner" class="spinner-border text-primary" role="status"
    style="display: none; position: fixed; top: 50%; left: 50%; z-index: 1050;">
    <span class="visually-hidden">Loading...</span>
</div>

<!-- Modal principal-->
<div class="modal fade" id="ingresoPrecioUModal" tabindex="-1" aria-labelledby="ingresoPrecioUModalLabel"
    aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">

    <!--<div id="mensaje-error" class="hide">Por favor, complete todos los campos requeridos.</div>-->
    <div id="mensaje-error" class="hide">Debe completar los campos requeridos.</div>

    <!--<div class="modal-dialog">-->
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-secondary text-white" style="height:35px;">
                <h5 class="modal-title" id="ingresoPrecioUModalLabel" style="color: #fff; font-size: 1.10rem;">
                    <!--Compras-->
                    Inventario
                </h5>
                <!--<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
            </div>

            <div class="modal-body">
                <div class="row mb-4">
                    <div class="col-12 text-center">
                        <strong id="pu_producto_nombre" class="product-title"></strong>
                    </div>
                </div>

                <div class="row mb-1">
                    <div class="col-12 container-custom">
                        <ul class="list-unstyled" style="margin-bottom: 0;">

                            <li class="mb-4 value-section p-3">
                                <label for="fecha-compra" class="value-label"><i class="bi bi-calendar3"></i> Fecha de
                                    compra</label>
                                <div class="input-container">
                                    <input type="date" id="fecha-compra" class="form-control" autocomplete="off"
                                        placeholder="">
                                </div>

                                <!--
                                <div class="row align-items-center">
                                    <div class="col-6 col-sm-6">
                                        <label for="fecha-compra" class="value-label">
                                            <i class="bi bi-calendar3"></i> Fecha de compra
                                        </label>
                                    </div>
                                    <div class="col-6 col-sm-6">
                                        <input type="date" id="fecha-compra" class="form-control" autocomplete="off"
                                            placeholder="">
                                    </div>
                                </div>
                                -->


                            </li>

                            <li class="mb-4 value-section">
                                <!--                                    
                                <div class="d-flex justify-content-between align-items-center mb-2 flex-nowrap">
                                    <p class="value-label mb-0 text-container"><i class="bi bi-box-seam"></i> Unidades
                                        entrantes</p>
                                    <div class="button-group">
                                        <button id="actualizar-unidad" class="btn btn-outline-secondary me-1">
                                            <i class="bi bi-arrow-clockwise"></i>
                                        </button>
                                        <button id="genera-item" type="button"
                                            class="btn btn-primary position-relative">
                                            <span id="item-fv"
                                                class="position-absolute translate-middle badge rounded-circle bg-danger text-white"
                                                data-total-item="0">
                                            </span>
                                            <i class="bi bi-table"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="d-flex align-items-center">
                                    <div class="input-container me-4" style="width: 50%;">
                                        <input type="text" id="pu_unidad" class="form-control text-center"
                                            autocomplete="off" inputmode="numeric" placeholder="Unidades">
                                    </div>
                                    <div class="current-value-label3 d-flex flex-column align-items-center"
                                        style="width: 50%;">
                                        <div class="text-primary fw-bold fs-5">
                                            <span>Bs</span>&nbsp;<span id="pu_costo_total">0.00</span>
                                        </div>
                                        <small class="text-muted">Costo Total</small>
                                    </div>
                                </div>
                            -->

                                <div class="card-custom">
                                    <!--<div class="card-header-custom" style="position: relative;">
                                        <i class="bi bi-box-seam"></i> Unidades entrantes

                                        <div class="button-group" style="position: absolute; right: 0px; top: 0px;">
                                            <button id="actualizar-unidad" class="btn btn-outline-secondary me-1">
                                                <i class="bi bi-arrow-clockwise"></i>
                                            </button>
                                            <button id="genera-item" type="button"
                                                class="btn btn-primary position-relative">
                                                <span id="item-fv"
                                                    class="position-absolute translate-middle badge rounded-circle bg-danger text-white"
                                                    data-total-item="0">
                                                </span>
                                                <i class="bi bi-table"></i>
                                            </button>
                                        </div>
                                    </div>-->

                                    <div class="card-header-custom">
                                        <i class="bi bi-box-seam"></i> Unidades

                                        <div class="button-group" style="position: absolute; right:10px; bottom:4px;">
                                        <!--<div class="button-group">-->
                                            <!--<button id="actualizar-unidad" class="btn btn-outline-secondary me-1">-->
                                            <button id="actualizar-unidad" class="btn btn-default me-0">
                                                <i class="bi bi-arrow-clockwise"></i>
                                            </button>
                                            <button id="genera-item" type="button"
                                                class="btn btn-default position-relative">
                                                <span id="item-fv"
                                                    class="position-absolute translate-middle badge rounded-circle bg-danger text-white"
                                                    data-total-item="0"></span>
                                                <i class="bi bi-table"></i>
                                            </button>
                                        </div>
                                    </div>


                                    <div class="card-body-custom">
                                        <!--<div class="input-section mb-2">
                                            <input type="text" id="pu_unidad" class="form-control text-center"
                                                autocomplete="off" inputmode="numeric"
                                                placeholder="Ingrese la cantidad de unidades">
                                        </div>                                        
                                        <div class="current-value-section">
                                            <div class="value-display">
                                                <span class="currency">Bs</span>&nbsp;<span
                                                    id="pu_costo_total">0.00</span>
                                            </div>
                                            <small class="value-description">Costo Total</small>
                                        </div>
                                    -->
                                        <div class="row">
                                            <div class="col-6 col-sm-6">
                                                <label for="pu_unidades" class="form-label">Entrantes</label>
                                                <input type="text" id="pu_unidad" class="form-control text-center"
                                                    autocomplete="off" inputmode="numeric"
                                                    placeholder="Unidades">
                                            </div>
                                            <div class="col-6 col-sm-6">
                                                <div class="current-value-section">
                                                    <div class="value-display">
                                                        <span class="currency">Bs</span>&nbsp;<span
                                                            id="pu_costo_total">0.00</span>
                                                    </div>
                                                    <small class="value-description">Costo Total</small>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>

                            </li>

                            <li class="mb-4 value-section">
                                <!--
                                <p class="value-label"><i class="bi bi-currency-exchange"></i> Costo unitario del
                                    proveedor</p>

                                <div class="d-flex align-items-center">
                                    <div class="input-container me-3" style="width: 50%;">
                                        <input type="text" id="pu_costoU_nuevo" class="form-control text-center"
                                            autocomplete="off" inputmode="numeric" placeholder="Monto en Bs">
                                    </div>
                                    <div class="current-value-label3 d-flex flex-column align-items-center"
                                        style="width: 50%;">
                                        <div class="text-primary fw-bold fs-5">
                                            <span>Bs</span>&nbsp;<span id="pu_costoU_actual">0.00</span>
                                        </div>
                                        <small class="text-muted">Monto Anterior</small>
                                    </div>
                                </div>
                                -->
                                <!--
                                <div class="card-custom">
                                    <div class="card-header-custom">
                                        <i class="bi bi-currency-exchange"></i> Costo unitario de proveedor
                                    </div>                                    
                                    <div class="card-body-custom">
                                        <div class="input-section mb-2">
                                            <label for="pu_costoU_nuevo" class="form-label">Nuevo Monto (Bs)</label>
                                            <input type="text" id="pu_costoU_nuevo" class="form-control text-center"
                                                autocomplete="off" inputmode="numeric"
                                                placeholder="Ingrese el nuevo monto">
                                        </div>
                                        <div class="current-value-section">
                                            <div class="value-display">
                                                <span class="currency">Bs</span>&nbsp;<span
                                                    id="pu_costoU_actual">0.00</span>
                                            </div>
                                            <small class="value-description">Monto anterior</small>
                                        </div>
                                    </div>
                                </div>
                            -->

                                <div class="card-custom">
                                    <div class="card-header-custom">
                                        <i class="bi bi-currency-exchange"></i> Costo proveedor/unidad
                                    </div>
                                    <div class="card-body-custom">
                                        <div class="row">
                                            <div class="col-6 col-sm-6">
                                                <label for="pu_costoU_nuevo" class="form-label">Nuevo Monto</label>
                                                <input type="text" id="pu_costoU_nuevo" class="form-control text-center"
                                                    autocomplete="off" inputmode="numeric" placeholder="Monto en Bs">
                                            </div>
                                            <div class="col-6 col-sm-6">
                                                <div class="current-value-section">
                                                    <div class="value-display">
                                                        <span class="currency">Bs</span>&nbsp;<span
                                                            id="pu_costoU_actual">0.00</span>
                                                    </div>
                                                    <small class="value-description">Monto anterior</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>

                            <li class="mb-4 value-section">
                                <!--
                                <p class="value-label"><i class="bi bi-graph-up"></i> Margen de ganancia</p>
                                <div class="d-flex align-items-center">
                                    <div class="input-container me-4" style="width: 50%;">
                                        <input type="text" id="pu_pGanancia_nuevo" class="form-control text-center"
                                            autocomplete="off" inputmode="numeric" placeholder="Porcentaje">
                                    </div>
                                    <div class="current-value-label3 d-flex flex-column align-items-center"
                                        style="width: 50%;">
                                        <div class="text-primary fw-bold fs-5">
                                            <span>%</span>&nbsp;<span id="pu_pGanancia_actual">0.0</span>
                                        </div>
                                        <small class="text-muted">Margen Anterior</small>
                                    </div>
                                </div>
                                -->

                                <!--<div class="card-custom">
                                    <div class="card-header-custom">
                                        <i class="bi bi-graph-up"></i> Margen de ganancia
                                    </div>
                                    <div class="card-body-custom">
                                        <div class="input-section mb-2">
                                            <label for="pu_costoU_nuevo" class="form-label">Nuevo Margen (%)</label>
                                            <input type="text" id="pu_pGanancia_nuevo" class="form-control text-center"
                                                autocomplete="off" inputmode="numeric"
                                                placeholder="Ingrese el nuevo margen">
                                        </div>
                                        <div class="current-value-section">
                                            <div class="value-display">
                                                <span class="currency">%</span>&nbsp;<span
                                                    id="pu_pGanancia_actual"></span>
                                            </div>
                                            <small class="value-description">Margen anterior</small>
                                        </div>
                                    </div>
                                </div>-->

                                <div class="card-custom">
                                    <div class="card-header-custom">
                                        <i class="bi bi-graph-up"></i> Margen de ganancia
                                    </div>
                                    <div class="card-body-custom">
                                        <div class="row">
                                            <div class="col-6 col-sm-6">
                                                <label for="pu_costoU_nuevo" class="form-label">Nuevo Margen</label>
                                                <input type="text" id="pu_pGanancia_nuevo"
                                                    class="form-control text-center" autocomplete="off"
                                                    inputmode="numeric" placeholder="Porcentaje">
                                            </div>
                                            <div class="col-6 col-sm-6">
                                                <div class="current-value-section">
                                                    <div class="value-display">
                                                        <span class="currency">%</span>&nbsp;<span
                                                            id="pu_pGanancia_actual"></span>
                                                    </div>
                                                    <small class="value-description">Margen anterior</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>

                            <li class="mb-2 value-section p-3">
                                <!--<label class="value-label"><i class="bi bi-calculator"></i> Montos calculados unitarios</label>-->
                                <label class="value-label"><i class="bi bi-calculator"></i> Montos unitarios
                                    calculados</label>
                                <div class="row text-center mb-2">
                                    <div class="col-4"><span class="label-header">Costo</span></div>
                                    <div class="col-4"><span class="label-header">Ganancia</span></div>
                                    <div class="col-4"><span class="label-header">Precio</span></div>
                                </div>
                                <div class="row highlighted-row">
                                    <div class="col-4 text-center"><span id="pu_costo_nuevo" class="value-new"></span>
                                    </div>
                                    <div class="col-4 text-center"><span id="pu_ganancia_nuevo"
                                            class="value-new"></span></div>
                                    <div class="col-4 text-center"><span id="pu_precioU_nuevo" class="value-new"></span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-4 text-center"><span id="pu_costo_actual"
                                            class=" value-current"></span></div>
                                    <div class="col-4 text-center"><span id="pu_ganancia_actual"
                                            class="value-current"></span></div>
                                    <div class="col-4 text-center"><span id="pu_precioU_actual"
                                            class="value-current"></span></div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--
            <div class="row mb-3">
                <div class="col-12">
                    <div class="card-custom">
                        <div class="card-header-custom">
                            <i class="bi bi-currency-exchange"></i> Costo unitario del proveedor
                        </div>
                        <div class="card-body-custom">                            
                            <div class="input-section mb-3">
                                <label for="pu_costoU_nuevo" class="form-label">Nuevo Monto (Bs)</label>
                                <input type="text" id="pu_costoU_nuevo" class="form-control text-center"
                                    autocomplete="off" inputmode="numeric" placeholder="Ingrese el nuevo monto">
                            </div>                            
                            <div class="current-value-section">
                                <div class="value-display">
                                    <span class="currency">Bs</span>&nbsp;<span id="pu_costoU_actual">0.00</span>
                                </div>
                                <small class="value-description">Monto anterior</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            -->


            <div class="modal-footer justify-content-center">
                <!--<button type="button" id="btn-salir-modal-ingreso" class="btn btn-light px-4 me-3" data-bs-dismiss="modal">-->
                <button type="button" id="btn-salir-modal-ingreso" class="btn btn-light px-4 me-1">
                    <i class="bi bi-arrow-up-circle me-2"></i>Salir
                </button>
                <button type="button" class="btn btn-success px-4" id="pu_aceptar">
                    <i class="bi bi-check-circle me-2"></i>Aceptar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- inicio Modal items-->
<!--
<div class="modal fade" id="itemModal" tabindex="-1" aria-labelledby="itemModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-secondary text-white" style="height:40px;">
                <h5 class="modal-title" id="itemModalLabel" style="color: #fff;">Genera Items</h5>
            </div>
            <div class="modal-body">
                <div class="row mb-4">
                    <div class="col-12 text-center">
                        <strong id="producto_nombre_items" class="product-title"></strong>
                    </div>
                </div>
                <div class="row align-items-center mb-2">
                    <div class="col-6 text-end">
                        <strong>Fecha de Vencimiento:</strong>
                    </div>
                    <div class="col-6">
                        <select id="select-fecha-vencimiento" class="form-select">
                            <option value="0">No Requerida</option>
                            <option value="1">Unificada</option>
                            <option value="2">Distinta</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3" style="position: relative;">
                    <div class="col-12 mb-1">
                        <input type="date" id="fecha-vencimiento" class="form-control text-center" disabled>
                    </div>
                    <div class="col-12">
                        <div id="notificacion-items" class="notificacion">
                            Favor ingrese la fecha
                        </div>
                    </div>
                </div>
                <div class="row mb-1" style="position: relative;">
                    <div class="col-12">
                        <table id="tabla-items" class="table table-bordered table-sm mb-0">
                            <thead class="table-light text-center">
                                <tr>
                                    <td colspan="3">Total items <span id="thead-total-items"></span></td>
                                </tr>
                                <tr>
                                    <th style="width: 10%;">Item</th>
                                    <th style="width: 60%;">Fecha Vto.</th>
                                    <th style="width: 30%;">Código</th>
                                </tr>
                            </thead>
                            <tbody id="item-table-body">                                
                            </tbody>
                        </table>
                    </div>
                    <div id="loading-overlay-tabla-items" class="custom-loading-overlay d-none">
                        <div class="spinner-border custom-spinner mb-3" role="status"></div>
                        <span>Cargando...</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-center">
                <button type="button" id='modal-items-aceptar' class="btn btn-light px-4 me-3">Aceptar</button>
            </div>
            <div id="loading-overlay-items" class="custom-loading-overlay d-none">
                <div class="spinner-border custom-spinner mb-3" role="status">
                </div>
                <span>Cargando...</span>
            </div>
        </div>
    </div>
</div>
-->
<!-- fin Modal items-->

<!-- Modal Items -->
<div class="modal fade" id="itemModal" tabindex="-1" aria-labelledby="itemModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Header -->
            <div class="modal-header bg-secondary text-white" style="height:40px;">
                <h5 class="modal-title" id="itemModalLabel" style="color: #fff;">Items</h5>
            </div>

            <!-- Body -->
            <div class="modal-body">
                <div class="row mb-3 text-center">
                    <div class="col">
                        <strong id="producto_nombre_items" class="product-title"></strong>
                    </div>
                </div>

                <div class="row align-items-center mb-3">
                    <div class="col-12 col-md-6 text-md-end mb-2 mb-md-0">
                        <strong>Fecha de Vencimiento:</strong>
                    </div>
                    <div class="col-12 col-md-6">
                        <select id="select-fecha-vencimiento" class="form-select">
                            <option value="0">No Requerida</option>
                            <option value="1">Unificada</option>
                            <option value="2">Distinta</option>
                        </select>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        <input type="date" id="fecha-vencimiento" class="form-control text-center" disabled>
                    </div>
                    <div class="col-12">
                        <div id="notificacion-items" class="notificacion text-center">
                            Favor ingrese la fecha
                        </div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        Total items: <span id="thead-total-items"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <table id="tabla-items" class="table table-bordered table-sm table-hover">
                            <thead class="table-light text-center">
                                <tr>
                                    <!--<th>Item</th>-->
                                    <th>N°</th>
                                    <th>Fecha Vto.</th>
                                    <th>Código</th>
                                </tr>
                            </thead>
                            <tbody id="item-table-body">
                                <!-- Filas dinámicas -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="loading-overlay-tabla-items" class="custom-loading-overlay d-none text-center">
                    <div class="spinner-border custom-spinner mb-3" role="status"></div>
                    <span>Cargando...</span>
                </div>
            </div>

            <!-- Footer -->
            <div class="modal-footer justify-content-center">
                <!--<button type="button" id="modal-items-aceptar" class="btn btn-secondary px-4">Aceptar</button>-->
                <button type="button" id="modal-items-aceptar" class="btn btn-default px-4">Aceptar</button>
            </div>

            <div id="loading-overlay-items" class="custom-loading-overlay d-none text-center">
                <div class="spinner-border custom-spinner mb-3" role="status"></div>
                <span>Cargando...</span>
            </div>
        </div>
    </div>
</div>
<!-- Fin Modal Items -->


<div class="custom-popup-overlay-b" id="popupOverlay-b" style="display: none;">
    <div class="custom-popup">
        <div class="popup-header">
            <div class="bg-secondary text-white p-2 d-flex align-items-center">
                <div class="col-1 d-flex justify-content-center" style="font-size: 1.0rem;">
                    <i class="bi bi-box-seam me-1"></i>
                </div>
                <div class="col-10">
                    <h5 class="mb-0">Inventario</h5>
                </div>
            </div>
        </div>

        <div id="popup-body-i" class="popup-body p-3">
            <div class="row mb-1">
                <div class="col-12 text-center">
                    <div class="position-relative2 d-inline-block">

                        <!-- SVG animado como borde de círculo -->
                        <svg class="circle-border" width="80" height="80" viewBox="0 0 65 63">
                            <circle cx="32" cy="32" r="30" stroke="#66BB6A" stroke-width="2" fill="none" />
                        </svg>

                        <!-- Ícono centrado sobre el SVG -->
                        <i class="bi bi-check-circle-fill icon-centered"></i>
                    </div>

                    <!-- Texto debajo del ícono y animación -->
                    <h5 class="mt-1">Ingreso registrado en el inventario correctamente</h5>
                </div>
            </div>

            <hr>

            <div class="row mb-1">
                <div class="col-12">
                    <ul class="list-unstyled">
                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Estado:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block text-success">Disponible en Inventario</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Producto:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">PAÑALES BEBITUS DESECHABLES TALLA XXG</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Modo de Operación:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">INGRESO</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Fecha de Ingreso:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">2024-10-26 17:05</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Fecha en Inventario:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">2024-10-30 18:00</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Unidades Entrantes:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">120</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Stock Disponible:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">120
                                        <span class="text-danger text-decoration-line-through ms-2">0</span>
                                    </span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Costo unitario del proveedor:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">$85.5
                                        <span class="text-danger text-decoration-line-through ms-2">$70</span>
                                    </span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Costo Total: (120 uni)</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">$123</span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Margen de Ganancia:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">%13
                                        <span class="text-danger text-decoration-line-through ms-2">%12</span>
                                    </span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Ganancia por unidad:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">$12
                                        <span class="text-danger text-decoration-line-through ms-2">8</span>
                                    </span>
                                </div>
                            </div>
                        </li>

                        <li class="mb-3">
                            <div class="row">
                                <div class="col-6 text-end">
                                    <strong class="text-muted">Precio unitario de venta:</strong>
                                </div>
                                <div class="col-6 col-result">
                                    <span class="d-block">$50
                                        <span class="text-danger text-decoration-line-through ms-2">45</span>
                                    </span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="popup-footer p-3 bg-light">
            <div class="text-center rounded-bottom">
                <button type="button" class="btn btn-default" id="cerrar-popup">
                    <i class="bi bi-house-door me-2"></i>Inicio
                </button>
                <button type="button" class="btn btn-default" id="lista">
                    <i class="bi bi-table me-2"></i>Pendientes
                </button>
            </div>
        </div>

        <!-- Capa de overlay con el spinner -->
        <div id="loading-overlay" class="loading-overlay d-none">
            <div class="spinner-border text-primary mb-3" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <span>Cargando...</span>
        </div>
    </div>
</div>


<div class="custom-popup-overlay-b" id="popupOverlay-b" style="display: none;">
    <div class="custom-popup-b">
        <div id="popup-header-i" class="custom-popup-header">
            <div class="custom-popup-header-bg p-2 d-flex align-items-center">
                <div class="custom-icon-container me-3">
                    <i class="bi bi-info-circle-fill"></i>
                </div>
                <h5 class="custom-popup-title mb-0 flex-grow-1">Aviso</h5>
            </div>
        </div>
        <div id="popup-body-i" class="custom-popup-body p-3">
            <p><b>400 unidades</b> del producto <b>“PAÑALES BEBITUS DESECHABLE TALLA XXG”</b> se añadirán al inventario.
                El precio unitario será <b>Bs. 54</b></p>
            <p>Los productos no tienen fecha de vencimiento.</p>
            <div class="custom-confirmation-message text-end mt-1">
                ¿Desea continuar?
            </div>
        </div>
        <div id="popup-footer-i" class="custom-popup-footer text-end p-2">
            <button type="button" class="btn btn-outline-secondary me-2" id="popup-cancelar">Cancelar</button>
            <button type="button" class="btn btn-primary" id="popup-aceptar">Si, Acepto</button>
        </div>
        <div id="loading-overlay" class="custom-loading-overlay d-none2">
            <div class="spinner-border custom-spinner mb-3" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <span>Cargando...</span>
        </div>
    </div>
</div>



<div class="custom-popup-overlay-B" id="popupOverlay-B" style="display: none;">
    <div class="custom-popup-B">
        <div id="popup-header-i" class="custom-popup-header">
            <div class="custom-popup-header-bg p-2 d-flex align-items-center">
                <div class="custom-icon-container me-3">
                    <i class="bi bi-info-circle-fill"></i>
                </div>
                <h5 class="custom-popup-title mb-0 flex-grow-1">Aviso</h5>
            </div>
        </div>
        <div class="popup-body custom-popup-body">
            <div class="d-flex1 p-4 align-items-center">
                <p class="mb-3">
                    <strong>Los 12 items creados previamente se eliminarán</strong>
                </p>
                <div class="custom-confirmation-message text-end mt-1">
                    ¿Deseas crear nuevos items?
                </div>
            </div>
        </div>
        <div class="popup-footer p-3 bg-light text-end">
            <button type="button" class="btn btn-outline-secondary me-2" id="popup-cancelar">Cancelar</button>
            <button type="button" class="btn btn-primary" id="popup-aceptar">Si, Acepto</button>
        </div>
    </div>
</div>



<button id="abrir-popup" class="btn btn-primary" style="display: none;"> Abrir Ventana Popup</button>

<!--<div id="mensaje-exito" class="show">Mensaje de prueba .</div>-->

{% if messages %}
{% for message in messages %}
<div id="mensaje-exito" class="hide">{{ message }}</div>
{% endfor %}
{% endif %}

<link href="{% static 'css/producto.css' %}" rel="stylesheet">
<script src="{% static 'js/cookie.js' %}"></script>
<script src="{% static 'js/busqueda.js' %}"></script>

{% endblock %}